webpackJsonp([20],{Jhdu:function(t,a,e){t.exports=e.p+"static/img/yuyue.6b47853.png"},WYNf:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Au9i"),i={data:function(){return{show1:!1,usermsg:[],carmsg:[],technician:[],service:[],textarea:"",menu_id:"",car_id:"",imgSrc:"",tupianlist:[],qwe:[]}},created:function(){var t=this;this.menu_id=this.$route.query.menu_id,this.car_id=this.$route.query.car_id,this.axios.post("https://api.chejiangshan.com/usecar-order",{token:"pWEHKxg4sFdLGWEx-mQfdlFy-9eKA1UT",menu_id:28,car_id:6}).then(function(a){t.usermsg=a.data.data.user,t.carmsg=a.data.data.car,t.technician=a.data.data.artificer,t.service=a.data.data.menu})},methods:{back:function(){this.$router.go(-1)},addpic:function(){this.show1=!0},quxiao:function(){this.show1=!1},galleryImg:function(){var t=this;console.log("从相册中选择图片:"),plus.gallery.pick(function(a){t.imgSrc=a;var e=new Image;e.src=a,e.onload=function(a){var s=e,i=s.width,n=s.height,o=i/n;n=(i=320)/o;var r=document.createElement("canvas");r.width=300,r.height=300,r.getContext("2d").drawImage(s,0,0,300,300);var c=r.toDataURL("image/png","image/jpeg","image/jpg",1);console.log(t.imgSrc),t.qwe.push(t.imgSrc),t.tupianlist.push(c),console.log("图片"+t.tupianlist)}})},captureImage:function(t){var a=this,e=plus.camera.getCamera(),s=e.supportedImageResolutions[0],i=e.supportedImageFormats[0];console.log("拍照分辨率: "+s+", 拍照文件格式: "+i),e.captureImage(function(t){plus.gallery.save(t,function(e){var s=e.file;console.log(t+"path"),console.log(e.file+"file");var i=new Image;i.src=s,i.onload=function(){var t=i,e=t.width,s=t.height,n=e/s;s=(e=320)/n;var o=document.createElement("canvas");o.width=300,o.height=300,o.getContext("2d").drawImage(t,0,0,300,300);var r=o.toDataURL("image/png","image/jpeg","image/jpg",1);console.log(r+"64编码"),a.tupianlist.push(r)}}),plus.io.resolveLocalFileSystemURL(t,function(t){var e=t.toLocalURL();a.imgSrc=e,a.qwe.push(e)})},function(t){console.log("捕获图像失败: "+t.message)},{resolution:s,format:i})},submitcontent:function(){var t=this;console.log(110),console.log(this.car_id),console.log(this.menu_id),console.log(this.textarea),this.axios.post("https://api.chejiangshan.com/usecar-setorder",{token:"pWEHKxg4sFdLGWEx-mQfdlFy-9eKA1UT",car_id:this.car_id,menu_id:this.menu_id,storm_id:2,artificer_id:2,pic:this.tupianlist,remark:this.textarea}).then(function(a){if(console.log(a),1==a.data.code){var e=Object(s.Toast)(a.data.msg);setTimeout(function(){e.close()},1e3),console.log(a.data.data.id),t.$router.push({name:"noorder",query:{order_id:a.data.data.id}})}if(-1==a.data.code){var i=Object(s.Toast)(a.data.msg);setTimeout(function(){i.close()},1e3)}})}}},n={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"main"},[s("header",[s("img",{attrs:{src:e("VQC2"),alt:""},on:{click:function(a){return t.back()}}}),t._v(" "),s("p",[t._v("快速预约")])]),t._v(" "),s("div",{staticStyle:{height:"79px"}}),t._v(" "),s("div",{staticClass:"car-owner"},[s("div",{staticClass:"owner"},[s("div",{staticClass:"owner-left"},[s("span",[t._v("\n          "+t._s(t.usermsg.username)+"\n        ")]),t._v(" "),s("span",[t._v("\n          "+t._s(t.usermsg.mobile)+"\n        ")])]),t._v(" "),s("div",{staticClass:"owner-right"},[s("span",[t._v(t._s(t.carmsg.plate_num))])])]),t._v(" "),s("div",{staticClass:"ownerCar"},[s("span",[t._v(t._s(t.carmsg.model))])])]),t._v(" "),s("div",{staticClass:"bar"}),t._v(" "),s("div",{staticClass:"workaddress"},[s("img",{attrs:{src:e("/c9e"),alt:""}}),t._v(" "),t._m(0),t._v(" "),s("span",{staticClass:"workname"},[t._v(t._s(t.technician[0].realname))])]),t._v(" "),s("div",{staticClass:"bar"}),t._v(" "),s("div",{staticClass:"repair"},[t._m(1),t._v(" "),s("p",[t._v(t._s(t.service.title))]),t._v(" "),s("span",[t._v("X 1")])]),t._v(" "),s("div",{staticClass:"bar"}),t._v(" "),s("div",{staticClass:"bottom"},[s("div",{staticClass:"sign"},[s("span",[t._v("备注：")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textarea,expression:"textarea"}],ref:"moretext",staticStyle:{"font-size":"12px","font-family":"PingFangSC-Regular, PingFang SC","font-weight":"400",color:"rgba(164, 163, 163, 1)","line-height":"17px"},attrs:{id:"signtxt",placeholder:"请输入服务需求"},domProps:{value:t.textarea},on:{input:function(a){a.target.composing||(t.textarea=a.target.value)}}})]),t._v(" "),s("div",{staticClass:"uploadpic"},[s("p",[t._v("车况图片：")]),t._v(" "),s("div",{staticClass:"pic"},[t._l(t.qwe,function(t,a){return s("img",{key:a,attrs:{src:t,alt:""}})}),t._v(" "),s("img",{attrs:{src:e("Ysra"),alt:""},on:{click:function(a){return t.addpic()}}})],2),t._v(" "),s("div",{staticClass:"submit",on:{click:function(a){return t.submitcontent()}}},[s("span",[t._v("提交")])])])]),t._v(" "),s("van-action-sheet",{model:{value:t.show1,callback:function(a){t.show1=a},expression:"show1"}},[s("ul",{staticClass:"phonelist"},[s("li",{staticClass:"paizhao",on:{click:function(a){return t.captureImage()}}},[t._v("拍照")]),t._v(" "),s("li",{staticClass:"paizhao",on:{click:function(a){return t.galleryImg()}}},[t._v("从相册选择")]),t._v(" "),s("li",{staticClass:"paizhao",on:{click:function(a){return t.quxiao()}}},[t._v("取消")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"address"},[a("p",[this._v("\n        陇海路店\n      ")]),this._v(" "),a("p",[this._v("\n        郑州市陇海路与城东路交叉口南500米路东\n      ")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"repaircar"},[a("img",{attrs:{src:e("Jhdu"),alt:""}})])}]};var o=e("VU/8")(i,n,!1,function(t){e("o383")},"data-v-4727da66",null);a.default=o.exports},Ysra:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgBAMAAAB54XoeAAAAG1BMVEUAAADU1NTX19fa2trc3NzZ2dnY2NjZ2dnY2NhNzCSXAAAACHRSTlMAGCA+bIf+/r/b1U8AAADKSURBVGje7dsxCsJAEAXQqNhbWQteQNQbeAErewvvkBtkjm200ya7ZIgB32+S6kFm4TNbpIk+TZ+kZzTpYHKAswRNETgH0ASB+hAI1IdAfQgE6kOgPgTOFlxsksHbI/c7lm23S53gKuIABFb2YTHYACcA96dXzhGX98txLLhu4yPddSS4ja/cRxZhLTh4JLWfPHzGlYeivvQh8L/A4nWuOKULZ/GGXboSu1S4L5sicCrQBIH6EAjUh0B9CATqQ6A+BP4GTP1hIxt8AkJ7903dRXIgAAAAAElFTkSuQmCC"},o383:function(t,a){}});
//# sourceMappingURL=20.64162d78ce48b6e457a2.js.map